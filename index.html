<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>OP-Nachsorgeplan – Achilles Altona</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    /* ── Reset & Base ── */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --dunkelblau: #004165;
      --hellblau:   #52C6E2;
      --gruengelb:  #D6E342;
      --weiss:      #ffffff;
      --grau-hell:  #f4f6f8;
      --grau-rand:  #dce3e8;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      font-size: 15px;
      color: var(--dunkelblau);
      background: var(--grau-hell);
      min-height: 100vh;
    }

    /* ── Header ── */
    header {
      background: var(--dunkelblau);
      padding: 24px 32px;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .logo-badge {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      background: var(--hellblau);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .logo-badge svg {
      width: 28px;
      height: 28px;
      fill: var(--dunkelblau);
    }

    .header-text h1 {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--weiss);
      letter-spacing: 0.5px;
    }

    .header-text p {
      font-size: 0.8rem;
      color: var(--hellblau);
      margin-top: 2px;
      font-weight: 400;
    }

    /* ── Main Container ── */
    main {
      max-width: 680px;
      margin: 32px auto;
      padding: 0 20px;
    }

    /* ── Card ── */
    .card {
      background: var(--weiss);
      border-radius: 12px;
      padding: 28px 32px;
      box-shadow: 0 2px 12px rgba(0,65,101,0.08);
      margin-bottom: 24px;
    }

    .card-title {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.2px;
      color: var(--hellblau);
      margin-bottom: 16px;
    }

    /* ── Date Input ── */
    .input-row {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .input-row label {
      font-weight: 700;
      font-size: 0.95rem;
      color: var(--dunkelblau);
      white-space: nowrap;
    }

    input[type="date"] {
      font-family: 'Montserrat', sans-serif;
      font-size: 0.95rem;
      color: var(--dunkelblau);
      border: 2px solid var(--grau-rand);
      border-radius: 8px;
      padding: 10px 14px;
      outline: none;
      transition: border-color 0.2s;
      cursor: pointer;
    }

    input[type="date"]:focus {
      border-color: var(--hellblau);
    }

    /* ── Op-Date Badge ── */
    .op-badge {
      display: none;
      align-items: center;
      gap: 8px;
      background: var(--dunkelblau);
      color: var(--weiss);
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 0.85rem;
      font-weight: 700;
      margin-top: 16px;
    }

    .op-badge.visible { display: flex; }

    .op-badge span.dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      background: var(--gruengelb);
      flex-shrink: 0;
    }

    /* ── Results ── */
    #results { display: none; }
    #results.visible { display: block; }

    /* ── Section Header ── */
    .section-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .section-pill {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 1px;
      padding: 4px 12px;
      border-radius: 20px;
      text-transform: uppercase;
    }

    .pill-wochen  { background: var(--hellblau);  color: var(--dunkelblau); }
    .pill-monate  { background: var(--gruengelb); color: var(--dunkelblau); }

    .section-line {
      flex: 1;
      height: 1px;
      background: var(--grau-rand);
    }

    /* ── Tables ── */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 8px;
    }

    th {
      background: var(--dunkelblau);
      color: var(--weiss);
      font-weight: 700;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      padding: 10px 14px;
      text-align: left;
    }

    td {
      padding: 9px 14px;
      font-size: 0.88rem;
      color: var(--dunkelblau);
      border-bottom: 1px solid var(--grau-rand);
    }

    tr:last-child td { border-bottom: none; }

    tr:nth-child(even) td { background: var(--grau-hell); }

    /* ── Highlight rows ── */
    tr.highlight-blau td  { background: rgba(82,198,226,0.12) !important; font-weight: 700; }
    tr.highlight-gelb td  { background: rgba(214,227,66,0.25) !important; font-weight: 700; }

    /* ── Two-column layout for tables ── */
    .tables-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    @media (max-width: 500px) {
      .tables-grid { grid-template-columns: 1fr; }
    }

    /* ── Export Button ── */
    .btn-export {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--dunkelblau);
      color: var(--weiss);
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 0.9rem;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      text-decoration: none;
    }

    .btn-export:hover { background: #005580; }
    .btn-export:active { transform: scale(0.98); }

    .btn-export svg {
      width: 16px; height: 16px;
      fill: var(--hellblau);
      flex-shrink: 0;
    }

    /* ── Footer ── */
    footer {
      text-align: center;
      font-size: 0.72rem;
      color: #7a9ab0;
      padding: 16px 0 32px;
    }

    /* ══════════════════════════════════════
       PRINT / PDF STYLES
    ══════════════════════════════════════ */
    @media print {
      @page {
        size: A4;
        margin: 18mm 18mm 18mm 18mm;
      }

      body {
        background: white;
        font-size: 11pt;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
        color-adjust: exact;
      }

      header {
        background: #004165 !important;
        padding: 14px 20px;
        border-radius: 0;
        margin-bottom: 16px;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .header-text h1 { font-size: 14pt; color: white !important; }
      .header-text p  { font-size: 8pt;  color: #52C6E2 !important; }

      .logo-badge { background: #52C6E2 !important; }
      .logo-badge svg { fill: #004165 !important; }

      main { margin: 0; max-width: 100%; padding: 0; }

      .card {
        box-shadow: none;
        border: 1px solid #dce3e8;
        border-radius: 6px;
        padding: 14px 18px;
        margin-bottom: 14px;
        break-inside: avoid;
      }

      .op-badge { background: #004165 !important; color: white !important; }
      .op-badge span.dot { background: #D6E342 !important; }

      th {
        background: #004165 !important;
        color: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .pill-wochen { background: #52C6E2 !important; color: #004165 !important; }
      .pill-monate { background: #D6E342 !important; color: #004165 !important; }

      tr:nth-child(even) td { background: #f4f6f8 !important; }
      tr.highlight-blau td  { background: rgba(82,198,226,0.15) !important; font-weight: 700; }
      tr.highlight-gelb td  { background: rgba(214,227,66,0.3) !important;  font-weight: 700; }

      .btn-export, footer { display: none !important; }

      .tables-grid { grid-template-columns: 1fr 1fr; }

      h2 { page-break-after: avoid; }
    }
  </style>
</head>
<body>

  <header>
    <div class="logo-badge">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 2.93 1.75 5.46 4.29 6.62L8 22h8l-1.29-6.38C17.25 14.46 19 11.93 19 9c0-3.87-3.13-7-7-7zm-1 13.9V17h2v-1.1A5.006 5.006 0 0 0 17 9c0-2.76-2.24-5-5-5S7 6.24 7 9a5.006 5.006 0 0 0 4 4.9z"/>
      </svg>
    </div>
    <div class="header-text">
      <h1>OP-Nachsorgeplan</h1>
      <p>Achilles Altona – Sportphysiotherapie</p>
    </div>
  </header>

  <main>
    <!-- Eingabe -->
    <div class="card">
      <div class="card-title">OP-Datum eingeben</div>
      <div class="input-row">
        <label for="opDate">Datum der Operation</label>
        <input type="date" id="opDate" />
      </div>
      <div class="op-badge" id="opBadge">
        <span class="dot"></span>
        <span id="opBadgeText"></span>
      </div>
    </div>

    <!-- Ergebnisse -->
    <div id="results">
      <div class="card">
        <div class="tables-grid">
          <!-- Wochen -->
          <div>
            <div class="section-header">
              <span class="section-pill pill-wochen">Wochen</span>
              <div class="section-line"></div>
            </div>
            <table id="tableWochen">
              <thead>
                <tr><th>Woche</th><th>Datum</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <!-- Monate -->
          <div>
            <div class="section-header">
              <span class="section-pill pill-monate">Monate</span>
              <div class="section-line"></div>
            </div>
            <table id="tableMonate">
              <thead>
                <tr><th>Monat</th><th>Datum</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Export -->
      <div class="card" style="padding: 20px 32px;">
        <button class="btn-export" onclick="printAsPDF()">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/>
          </svg>
          Als PDF exportieren
        </button>
      </div>
    </div>
  </main>

  <footer>Achilles Altona · Sportphysiotherapie · Hamburg-Altona</footer>

  <script>
    const HIGHLIGHT_WOCHEN = [6, 12];
    const HIGHLIGHT_MONATE = [3, 6, 12];

    document.getElementById('opDate').addEventListener('change', calculate);

    function formatDate(date) {
      const d = String(date.getDate()).padStart(2,'0');
      const m = String(date.getMonth()+1).padStart(2,'0');
      const y = date.getFullYear();
      return `${d}.${m}.${y}`;
    }

    function calculate() {
      const val = document.getElementById('opDate').value;
      const badge = document.getElementById('opBadge');
      const results = document.getElementById('results');

      if (!val) {
        badge.classList.remove('visible');
        results.classList.remove('visible');
        return;
      }

      const opDate = new Date(val);

      document.getElementById('opBadgeText').textContent =
        `OP-Datum: ${formatDate(opDate)}`;
      badge.classList.add('visible');

      const wTbody = document.querySelector('#tableWochen tbody');
      wTbody.innerHTML = '';
      for (let w = 1; w <= 12; w++) {
        const d = new Date(opDate.getTime());
        d.setDate(d.getDate() + 7 * w);
        const tr = document.createElement('tr');
        if (HIGHLIGHT_WOCHEN.includes(w)) tr.classList.add('highlight-blau');
        tr.innerHTML = `<td>Woche ${w}</td><td>${formatDate(d)}</td>`;
        wTbody.appendChild(tr);
      }

      const mTbody = document.querySelector('#tableMonate tbody');
      mTbody.innerHTML = '';
      for (let m = 1; m <= 12; m++) {
        const d = new Date(opDate.getTime());
        d.setMonth(d.getMonth() + m);
        const tr = document.createElement('tr');
        if (HIGHLIGHT_MONATE.includes(m)) tr.classList.add('highlight-gelb');
        tr.innerHTML = `<td>Monat ${m}</td><td>${formatDate(d)}</td>`;
        mTbody.appendChild(tr);
      }

      results.classList.add('visible');
    }

    function printAsPDF() {
      window.print();
    }
  </script>
</body>
</html>
